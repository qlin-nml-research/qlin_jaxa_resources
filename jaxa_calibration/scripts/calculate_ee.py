import dqrobotics as dql
import numpy as np

# np.printoptions(precision=20)
np.set_printoptions(formatter={'float': '{: 0.30f},'.format})

# arm1
# original_pose = dql.DQ([ 0.213266823160492391409093215771,  0.443088051572855967652486697261,
#   0.835259973564704605308861573576,  0.246030520978781364060949954364,
#   0.013570410256612645827356544714, -0.201981330505606432312859510603,
#   0.085536394883371349995293542179,  0.061603206439627591906038617253,])
# new_pose = dql.DQ([ 0.903928557291200029943922800157,  0.023167432904058978676564706234,
#  -0.324772266621851712908863873963,  0.277307425431397913673237098919,
#  -0.083563038589167637493204665589,  0.032530771115492296274851469207,
#  -0.053258035181068266727955062834,  0.207295673985761180757592114787,])

# arm2
original_pose = dql.DQ([ 0.419662741956740636961598056587, -0.182075657067947038747490751120,
 -0.884874772532318276674345725041,  0.087910608304707288374046925128,
 -0.074241520365110433288258207085,  0.169639185925447188996173508713,
 -0.063478830864045543425078221844,  0.066803658137724417076519500824,]
                       )
new_pose = dql.DQ([-0.754447883960247756007788666466, -0.234584183378458488444806562256,
                   -0.358908557919444648476314796426, -0.496954020356764225585521899120,
                   0.122731554865587372260549159364, 0.065309646748735988852629930079,
                   0.027759270183077416893624445038, -0.237201444830772961713805102590, ]
                  )

current_effector = dql.DQ([1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0])

tf = new_pose.conj() * original_pose

new_ee = current_effector * tf

r = new_ee.rotation()
t = new_ee.translation()
print(new_ee.translation())
print(new_ee.rotation())

print((r + 0.5 * dql.E_ * (t) * r).vec8())
